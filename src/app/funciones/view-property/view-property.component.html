<div class="container my-5">
    <div *ngIf="inmueble !== undefined" class="property-details">
        <div class="row">
            <div class="col-md-4">
                <img [src]="inmueble.foto" class="img-fluid rounded property-image" alt="Imagen del inmueble">
            </div>
            <div class="col-md-8">
                <h1 class="property-title">{{inmueble.titulo}}</h1>
                <p class="property-info text-muted">{{inmueble.precio}}€ / noche - {{inmueble.metrosCuadrados}}m<sup>2</sup></p>
                <p class="property-info">{{inmueble.comunidadAutonoma}} - {{inmueble.provincia}} - {{inmueble.municipio}} - {{inmueble.calle}}</p>
                <h4 class="property-subtitle">Descripción</h4>
                <p class="property-description">{{inmueble.descripcion}}</p>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-6">
                <h4 class="property-subtitle">Detalles del inmueble</h4>
                <ul class="property-details-list">
                    <li>Nº Habitaciones: {{inmueble.numHabitaciones}}</li>
                    <li>Nº Baños: {{inmueble.numBanios}}</li>
                    <li>Nº pisos: {{inmueble.numPisos}}</li>
                    <li>Terrazas: {{inmueble.numTerrazas}}</li>
                    <li>Garaje: {{inmueble.garaje ? 'Disponible' : 'No disponible'}}</li>
                    <li><strong>Contacto propietario:</strong> {{inmueble.correoPropietario}}</li>
                </ul>
            </div>
            <div class="col-md-6">
                <div class="reservation-form">
                    <label for="fechaInicio">Fecha de Entrada</label>
                    <input type="date" class="form-control" name="fechaInicio" [(ngModel)]="fechaInicio">
                    <label for="fechaFin" class="mt-3">Fecha de Salida</label>
                    <input type="date" class="form-control" name="fechaFin" [(ngModel)]="fechaFin">
                    <button class="btn btn-primary mt-3" (click)="solicitarReserva()">Solicitar Reserva</button>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-6">
                <h3 class="property-subtitle">Comentarios</h3>
                <div *ngFor="let c of comentarios" class="comment">
                    <p><strong>{{c[0]}}:</strong> {{c[1]}}</p>
                </div>
                <div class="comment-input mt-3">
                    <label for="comentario">Escribe tu comentario:</label>
                    <textarea class="form-control" name="comentario" [(ngModel)]="comentario" required></textarea>
                    <button (click)="agregarComentario()" class="btn btn-primary mt-2">Agregar Comentario</button>
                </div>
            </div>
            <div class="col-md-6">
                <h3 class="property-subtitle">Dar puntuación:</h3>
                <p>Puntuación Media: {{ valoracionMedia }} estrellas</p>
                <div class="star-rating">
                    <span class="star" (click)="puntuar(1)">&#9733;</span>
                    <span class="star" (click)="puntuar(2)">&#9733;</span>
                    <span class="star" (click)="puntuar(3)">&#9733;</span>
                    <span class="star" (click)="puntuar(4)">&#9733;</span>
                    <span class="star" (click)="puntuar(5)">&#9733;</span>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-6">
                <div *ngIf="usuarioLogeado !== undefined && usuarioLogeado.uid === inmueble.propietario">
                    <button class="btn btn-primary" (click)="modificarInmueble()">Editar</button>
                    <button class="btn btn-danger ms-2" (click)="eliminarPropiedad()">Eliminar</button>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="inmueble === undefined" class="text-center mt-5">
        <h1 class="text-danger">Propiedad no encontrada</h1>
        <button routerLink="/home" class="btn btn-primary mt-3">Volver a Inicio</button>
    </div>
</div>
